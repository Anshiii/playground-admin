<!DOCTYPE html>

<html>
<head>
<title>SEO - QOR5 Documentation</title>

<meta name='description'>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<base href='/qor5/'>

<link href='index.css' rel='stylesheet' type='text/css'>

<script type='text/javascript' defer src='index.js'></script>
</head>

<body>
<div id='app' v-cloak>
<nav class='bg-gray-700 py-3 text-base font-normal mb-8'>
<div aria-label='Breadcrumbs' class='flex list-none lg:max-w-5xl mx-auto px-6 sm:px-10'>
<div class='flex'>
<a href='index.html' class='text-gray-50'>QOR5 Documentation</a>
</div>

<div class='flex'>
<div class='w-3 m-2 fill-current text-gray-500'>
<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" data-v-134594fd="" data-v-838665fe=""><path data-v-7abeccde="" d="m4.81347656 13.1269531c.22558594 0 .41015625-.0820312.56738282-.2324219l5.31835942-5.19531245c.1845703-.19140625.2802734-.38964844.2802734-.63574219 0-.23925781-.0888672-.45117187-.2802734-.62890625l-5.31835942-5.20214843c-.15722657-.15039063-.34179688-.23242188-.56738282-.23242188-.45800781 0-.81347656.35546875-.81347656.80664062 0 .21875.09570312.43066407.24609375.58789063l4.79199219 4.67578125-4.79199219 4.6621094c-.15722656.1640625-.24609375.3623047-.24609375.5878906 0 .4511719.35546875.8066406.81347656.8066406z"></path></svg>
</div>

<a href='seo.html' class='text-gray-50'>SEO</a>
</div>
</div>
</nav>

<div>
<main class='lg:max-w-5xl mx-auto px-6 sm:px-8'>
<h1>SEO</h1>

<div class='sm:flex mt-8 mb-16'>
<div class='sm:w-9/12'>
<div class='border-t'>The SEO library allows for the management and injection of dynamic data into HTML tags for the purpose of Search Engine Optimisation.
<h2>Definition</h2>

<h5>Collection is used to manage all SEO and render seo setting to html data.</h5>

<bran-code language='go'>
<template slot='sourcecode'>type Collection struct {
	registeredSEO []*SEO
	globalName    string      //default name is GlobalSEO
	inherited     bool        //default is true. the order is model seo setting, system seo setting, global seo setting
	dbContextKey  interface{} // get db from context
	settingModel  interface{} // db model
}
</template>
</bran-code>

<h5>SEO is used to provide system-level default page matadata.</h5>

<bran-code language='go'>
<template slot='sourcecode'>type SEO struct {
	name             string
	modelTyp         reflect.Type
	contextVariables map[string]contextVariablesFunc // fetch context variables from request
	settingVariables interface{}                     // fetch setting variables from db
}
</template>
</bran-code>

<h5>You can use seo setting at the model level, but you need to register the model to the system SEO</h5>

<bran-code language='go'>
<template slot='sourcecode'>type Product struct {
	Name string
	SEO  Setting
}
</template>
</bran-code>

<bran-code language='go'>
<template slot='sourcecode'>collection.RegisterSEO(&amp;Product{})</template>
</bran-code>

<h5>Support customizing your own seo setting when you need more functions such as l10n, publish. Only need to implement this interface.</h5>

<bran-code language='go'>
<template slot='sourcecode'>type QorSEOSettingInterface interface {
	GetName() string
	SetName(string)
	GetSEOSetting() Setting
	SetSEOSetting(Setting)
	GetVariables() Variables
	SetVariables(Variables)
	GetTitle() string
	GetDescription() string
	GetKeywords() string
	GetOpenGraphURL() string
	GetOpenGraphType() string
	GetOpenGraphImageURL() string
	GetOpenGraphImageFromMediaLibrary() media_library.MediaBox
	GetOpenGraphMetadata() []OpenGraphMetadata
}
</template>
</bran-code>
<h2><a name="usage" class="anchor" href="#usage" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<ul>
<li><p>Create a SEO collection</p>

<div class="highlight highlight-go"><pre>// Create a collection and register global seo by default
collection := seo.NewCollection()

// Change the default global name
collection.SetGlobalName(&#34;My Global SEO&#34;)

// Change the default context db key
collection.SetDBContextKey(&#34;My DB&#34;)

// Change the default seo model setting
type MySEOSetting struct{
	QorSEOSetting
	publish
	l10n
}
collection.SetSettingModel(&amp;MySEOSetting{})

// Turn off the default inherit the upper level SEO data when the current SEO data is missing
collection.SetInherited(false)

</pre></div></li>

<li><p>Register and remove SEO</p>

<div class="highlight highlight-go"><pre>// Register mutiple SEO by name
collection.RegisterSEOByNames(&#34;Not Found&#34;, &#34;Internal Server Error&#34;)

// Register a SEO by model
type Product struct{
	Name  string
	Setting Setting
}
collection.RegisterSEO(&amp;Product{})

// Remove a SEO
collection.RemoveSEO(&amp;Product{}).RemoveSEO(&#34;Not Found&#34;)
</pre></div></li>

<li><p>Configure SEO</p>

<div class="highlight highlight-go"><pre>// Change the default SEO name when register a SEO by model

collection.RegisterSEO(&amp;Product{}).SetName(&#34;My Product&#34;)

// Register a context Variable
collection.RegisterSEO(&amp;Product{}).
			RegisterContextVariables(&#34;og:image&#34;, func(obj interface{}, _ *Setting, _ *http.Request) string {
						return obj.image.url
					}).
			RegisterContextVariables(&#34;Name&#34;, func(obj interface{}, _ *Setting, _ *http.Request) string {
						return obj.Name
					})


// Register setting variable
collection.RegisterSEO(&amp;Product{}).
			RegisterSettingVaribles(struct{ProductTag string}{})
</pre></div></li>

<li><p>Render SEO html data</p>

<div class="highlight highlight-go"><pre>// Render Global SEO
collection.RenderGlobal(request)

// Render SEO by a name
collection.Render(&#34;product&#34;, request)

// Render SEO by a model
collection.Render(Product{}, request)
</pre></div></li>
</ul>

<h2>Example</h2>

<bran-code language='go'>
<template slot='sourcecode'>var SeoCollection *seo.Collection

func ConfigureSeo(b *presets.Builder, db *gorm.DB) {
	SeoCollection = seo.NewCollection()
	SeoCollection.RegisterSEO(&amp;models.Post{}).RegisterContextVariables(
		&#34;Title&#34;,
		func(object interface{}, _ *seo.Setting, _ *http.Request) string {
			if article, ok := object.(models.Post); ok {
				return article.Title
			}
			return &#34;&#34;
		},
	).RegisterSettingVaribles(struct{ Test string }{})
	SeoCollection.RegisterSEOByNames(&#34;Not Found&#34;, &#34;Internal Server Error&#34;)
	SeoCollection.Configure(b, db)
}
</template>
</bran-code>
</div>
</div>

<div class='ml-4 sm:w-3/12 font-medium text-base hidden sm:block text-gray-600'>
<div class='sticky top-4'>On This Page<toc></toc></div>
</div>
</div>
</main>
</div>
</div>
</body>
</html>
